{"ast":null,"code":"var buildHTML = function buildHTML(XHR) {\n  var item = XHR.response.post;\n  var html = \"\\n    <div class=\\\"post\\\">\\n      <div class=\\\"post-date\\\">\\n        \\u6295\\u7A3F\\u65E5\\u6642:\".concat(item.created_at, \"\\n      </div>\\n      <div class=\\\"post-content\\\">\\n        \").concat(item.content, \"\\n      </div>\\n    </div> \");\n  return html;\n};\n\nfunction post() {\n  var submit = document.getElementById(\"submit\");\n  submit.addEventListener(\"click\", function (e) {\n    e.preventDefault();\n    var form = document.getElementById(\"form\");\n    var formData = new FormData(form);\n    var XHR = new XMLHttpRequest();\n    XHR.open(\"POST\", \"/post\", true);\n    XHR.responseType = \"json\";\n    XHR.send(formData);\n\n    XHR.onload = function () {\n      if (XHR.status != 200) {\n        alert(\"Error \".concat(XHR.status, \": \").concat(XHR.statusText));\n        return null;\n      }\n\n      var list = document.getElementById(\"list\");\n      var formText = document.getElementById(\"content\");\n      list.insertAdjacentHTML(\"afterend\", buildHTML(XHR));\n      formText.value = \"\";\n    };\n  });\n}\n\nwindow.addEventListener('load', post);","map":{"version":3,"sources":["/Users/ksudo/projects/ajax_app/app/javascript/memo.js"],"names":["buildHTML","XHR","item","response","post","html","created_at","content","submit","document","getElementById","addEventListener","e","preventDefault","form","formData","FormData","XMLHttpRequest","open","responseType","send","onload","status","alert","statusText","list","formText","insertAdjacentHTML","value","window"],"mappings":"AAAA,IAAMA,SAAS,GAAG,SAAZA,SAAY,CAACC,GAAD,EAAS;AACzB,MAAMC,IAAI,GAAGD,GAAG,CAACE,QAAJ,CAAaC,IAA1B;AACA,MAAMC,IAAI,2GAGGH,IAAI,CAACI,UAHR,yEAMFJ,IAAI,CAACK,OANH,gCAAV;AASE,SAAOF,IAAP;AACH,CAZD;;AAcA,SAASD,IAAT,GAAgB;AACd,MAAMI,MAAM,GAAGC,QAAQ,CAACC,cAAT,CAAwB,QAAxB,CAAf;AACAF,EAAAA,MAAM,CAACG,gBAAP,CAAwB,OAAxB,EAAiC,UAACC,CAAD,EAAO;AACtCA,IAAAA,CAAC,CAACC,cAAF;AACA,QAAMC,IAAI,GAAGL,QAAQ,CAACC,cAAT,CAAwB,MAAxB,CAAb;AACA,QAAMK,QAAQ,GAAG,IAAIC,QAAJ,CAAaF,IAAb,CAAjB;AACA,QAAMb,GAAG,GAAG,IAAIgB,cAAJ,EAAZ;AACAhB,IAAAA,GAAG,CAACiB,IAAJ,CAAS,MAAT,EAAiB,OAAjB,EAA0B,IAA1B;AACAjB,IAAAA,GAAG,CAACkB,YAAJ,GAAmB,MAAnB;AACAlB,IAAAA,GAAG,CAACmB,IAAJ,CAASL,QAAT;;AACAd,IAAAA,GAAG,CAACoB,MAAJ,GAAa,YAAM;AACjB,UAAIpB,GAAG,CAACqB,MAAJ,IAAc,GAAlB,EAAuB;AACrBC,QAAAA,KAAK,iBAAUtB,GAAG,CAACqB,MAAd,eAAyBrB,GAAG,CAACuB,UAA7B,EAAL;AACA,eAAO,IAAP;AACD;;AACD,UAAMC,IAAI,GAAGhB,QAAQ,CAACC,cAAT,CAAwB,MAAxB,CAAb;AACA,UAAMgB,QAAQ,GAAGjB,QAAQ,CAACC,cAAT,CAAwB,SAAxB,CAAjB;AACAe,MAAAA,IAAI,CAACE,kBAAL,CAAwB,UAAxB,EAAoC3B,SAAS,CAACC,GAAD,CAA7C;AACAyB,MAAAA,QAAQ,CAACE,KAAT,GAAiB,EAAjB;AACD,KATD;AAUD,GAlBD;AAmBD;;AAEDC,MAAM,CAAClB,gBAAP,CAAwB,MAAxB,EAAgCP,IAAhC","sourcesContent":["const buildHTML = (XHR) => {\n  const item = XHR.response.post;\n  const html = `\n    <div class=\"post\">\n      <div class=\"post-date\">\n        投稿日時:${item.created_at}\n      </div>\n      <div class=\"post-content\">\n        ${item.content}\n      </div>\n    </div> `;\n    return html\n}\n\nfunction post (){\n  const submit = document.getElementById(\"submit\");\n  submit.addEventListener(\"click\", (e) => {\n    e.preventDefault();\n    const form = document.getElementById(\"form\");\n    const formData = new FormData(form);\n    const XHR = new XMLHttpRequest();\n    XHR.open(\"POST\", \"/post\", true);\n    XHR.responseType = \"json\";\n    XHR.send(formData);\n    XHR.onload = () => {\n      if (XHR.status != 200) {\n        alert(`Error ${XHR.status}: ${XHR.statusText}`);\n        return null;\n      }\n      const list = document.getElementById(\"list\")\n      const formText = document.getElementById(\"content\")\n      list.insertAdjacentHTML(\"afterend\", buildHTML(XHR))\n      formText.value = \"\";\n    };\n  });\n}\n\nwindow.addEventListener('load', post);"]},"metadata":{},"sourceType":"module"}